{
  "version": 3,
  "sources": ["../widget/utils.ts", "../widget/validation.ts", "../widget/ui.ts", "../widget/tooltip.ts", "../widget/styles.ts", "../widget/widget.ts", "../widget/index.ts"],
  "sourcesContent": ["import type { KoalaChatWidgetConfig } from \"./types\";\n\n/**\n * \u83B7\u53D6API URL\u7684\u8F85\u52A9\u51FD\u6570\n */\nexport function getApiUrl(config: KoalaChatWidgetConfig): string {\n  // \u5982\u679C\u914D\u7F6E\u4E2D\u6709apiUrl\uFF0C\u76F4\u63A5\u4F7F\u7528\n  if (config.apiUrl) {\n    return config.apiUrl;\n  }\n\n  // \u5C1D\u8BD5\u4ECE\u811A\u672C\u6807\u7B7E\u83B7\u53D6\u6E90\u57DF\u540D\n  const scriptElement = document.querySelector(\n    'script[src*=\"koala-chat-widget.js\"]'\n  );\n  if (scriptElement) {\n    const scriptSrc = scriptElement.getAttribute(\"src\");\n    if (scriptSrc) {\n      try {\n        const url = new URL(scriptSrc, window.location.href);\n        return url.origin;\n      } catch (e) {\n        console.warn(\"Unable to parse script source URL:\", scriptSrc);\n      }\n    }\n  }\n\n  // \u515C\u5E95\u4F7F\u7528\u5F53\u524D\u9875\u9762\u57DF\u540D\n  return window.location.origin;\n}\n\n/**\n * \u9632\u6296\u51FD\u6570\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: NodeJS.Timeout | null = null;\n\n  return (...args: Parameters<T>) => {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => func(...args), wait);\n  };\n}\n\n/**\n * \u6E05\u7406\u5B9A\u65F6\u5668\n */\nexport function clearTimer(timer: NodeJS.Timeout | null): null {\n  if (timer) {\n    clearTimeout(timer);\n  }\n  return null;\n}\n", "import type { KoalaChatWidgetConfig, ValidationResponse } from \"./types\";\nimport { getApiUrl } from \"./utils\";\n\n/**\n * \u57DF\u540D\u9A8C\u8BC1\u670D\u52A1\n */\nexport class ValidationService {\n  private config: KoalaChatWidgetConfig;\n\n  constructor(config: KoalaChatWidgetConfig) {\n    this.config = config;\n  }\n\n  /**\n   * \u9A8C\u8BC1\u57DF\u540D\n   */\n  async validateDomain(): Promise<ValidationResponse> {\n    if (!this.config.appId) {\n      return { isValid: false, reason: \"AppId is required\" };\n    }\n\n    try {\n      const apiUrl = getApiUrl(this.config);\n      const currentDomain = window.location.hostname;\n\n      const response = await fetch(`${apiUrl}/api/AppConfig/validatedomain`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          appId: this.config.appId,\n          domain: currentDomain,\n        }),\n      });\n\n      if (!response.ok) {\n        console.error(\"Domain validation request failed:\", response.status);\n        return { isValid: false, reason: \"ValidationRequestFailed\" };\n      }\n\n      const { data } = await response.json();\n      return {\n        isValid: data.isValid,\n        reason: data.reason,\n        appConfig: data.appConfig,\n      };\n    } catch (error) {\n      console.error(\"Domain validation error:\", error);\n      return { isValid: false, reason: \"NetworkError\" };\n    }\n  }\n\n  /**\n   * \u6267\u884C\u57DF\u540D\u9A8C\u8BC1\u5E76\u66F4\u65B0\u914D\u7F6E\n   */\n  async validateAndUpdateConfig(): Promise<boolean> {\n    const validation = await this.validateDomain();\n    if (!validation.isValid) {\n      console.error(\n        \"KoalaChatWidget: Domain validation failed -\",\n        validation.reason\n      );\n      if (typeof this.config.onValidationFailed === \"function\") {\n        this.config.onValidationFailed(window.location.hostname);\n      }\n      return false;\n    }\n\n    // \u66F4\u65B0\u914D\u7F6E\uFF08\u5982\u679C\u4ECE\u9A8C\u8BC1\u7ED3\u679C\u4E2D\u83B7\u53D6\u5230\u4E86\u5E94\u7528\u914D\u7F6E\uFF09\n    if (validation.appConfig) {\n      this.config.organizationName = validation.appConfig.organizationName;\n      this.config.repositoryName = validation.appConfig.repositoryName;\n      this.config.title = validation.appConfig.name || this.config.title;\n    }\n\n    return true;\n  }\n}\n", "import type { KoalaChatWidgetConfig } from \"./types\";\nimport { getApiUrl } from \"./utils\";\n\n/**\n * UI \u7EC4\u4EF6\u7BA1\u7406\u7C7B\n */\nexport class UIComponents {\n  private config: KoalaChatWidgetConfig;\n\n  constructor(config: KoalaChatWidgetConfig) {\n    this.config = config;\n  }\n\n  /**\n   * \u521B\u5EFA\u60AC\u6D6E\u7403\u6309\u94AE\n   */\n  createFloatingButton(onClick: () => void): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.className = \"koala-floating-button\";\n    button.title = \"\u6253\u5F00 AI \u52A9\u624B\";\n\n    if (this.config.expandIcon) {\n      button.style.backgroundImage = `url(data:image/png;base64,${this.config.expandIcon})`;\n      button.style.backgroundSize = \"cover\";\n      button.style.backgroundPosition = \"center\";\n    } else {\n      const baseUrl = getApiUrl(this.config);\n      button.innerHTML = `<img src=\"${baseUrl}/logo.png\" alt=\"AI \u52A9\u624B\" style=\"width: 64px; height: 64px;\">`;\n    }\n\n    button.addEventListener(\"click\", onClick);\n    return button;\n  }\n\n  /**\n   * \u521B\u5EFA\u804A\u5929\u5BB9\u5668\n   */\n  createChatContainer(\n    onMinimize: () => void,\n    onMaximize: () => void,\n    onClose: () => void\n  ): HTMLDivElement {\n    const container = document.createElement(\"div\");\n    container.className = \"koala-chat-container\";\n\n    // \u521B\u5EFA\u5934\u90E8\n    const header = this.createHeader(onMinimize, onMaximize, onClose);\n\n    // \u521B\u5EFA\u5185\u5BB9\u533A\u57DF\n    const content = document.createElement(\"div\");\n    content.className = \"koala-chat-content\";\n    this.showLoading(content);\n\n    container.appendChild(header);\n    container.appendChild(content);\n\n    return container;\n  }\n\n  /**\n   * \u521B\u5EFA\u5934\u90E8\n   */\n  private createHeader(\n    onMinimize: () => void,\n    onMaximize: () => void,\n    onClose: () => void\n  ): HTMLDivElement {\n    const header = document.createElement(\"div\");\n    header.className = \"koala-chat-header\";\n\n    const title = document.createElement(\"div\");\n    title.className = \"koala-header-title\";\n    title.innerHTML = `${this.config.title || \"AI \u52A9\u624B\"}`;\n\n    const actions = document.createElement(\"div\");\n    actions.className = \"koala-header-actions\";\n\n    // \u6700\u5C0F\u5316\u6309\u94AE\n    const minimizeBtn = this.createHeaderButton(\"\u2212\", \"\u6700\u5C0F\u5316\", onMinimize);\n\n    // \u6700\u5927\u5316\u6309\u94AE\n    const maximizeBtn = this.createHeaderButton(\"\u26F6\", \"\u6700\u5927\u5316\", onMaximize);\n\n    // \u5173\u95ED\u6309\u94AE\n    const closeBtn = this.createCloseButton(onClose);\n\n    actions.appendChild(minimizeBtn);\n    actions.appendChild(maximizeBtn);\n    actions.appendChild(closeBtn);\n\n    header.appendChild(title);\n    header.appendChild(actions);\n\n    return header;\n  }\n\n  /**\n   * \u521B\u5EFA\u5934\u90E8\u6309\u94AE\n   */\n  private createHeaderButton(\n    content: string,\n    title: string,\n    onClick: () => void\n  ): HTMLButtonElement {\n    const button = document.createElement(\"button\");\n    button.className = \"koala-header-btn\";\n    button.innerHTML = content;\n    button.title = title;\n    button.addEventListener(\"click\", onClick);\n    return button;\n  }\n\n  /**\n   * \u521B\u5EFA\u5173\u95ED\u6309\u94AE\n   */\n  private createCloseButton(onClick: () => void): HTMLButtonElement {\n    const closeBtn = document.createElement(\"button\");\n    closeBtn.className = \"koala-header-btn\";\n    closeBtn.title = \"\u5173\u95ED\";\n\n    if (this.config.closeIcon) {\n      const img = document.createElement(\"img\");\n      img.src = `data:image/png;base64,${this.config.closeIcon}`;\n      img.alt = \"\u5173\u95ED\";\n      img.style.width = \"14px\";\n      img.style.height = \"14px\";\n      closeBtn.appendChild(img);\n    } else {\n      closeBtn.innerHTML = \"\u00D7\";\n    }\n\n    closeBtn.addEventListener(\"click\", onClick);\n    return closeBtn;\n  }\n\n  /**\n   * \u663E\u793A\u52A0\u8F7D\u72B6\u6001\n   */\n  showLoading(container: HTMLElement): void {\n    container.innerHTML = `\n      <div class=\"koala-loading\">\n        <div>\u6B63\u5728\u52A0\u8F7D AI \u52A9\u624B...</div>\n      </div>\n    `;\n  }\n\n  /**\n   * \u663E\u793A\u9519\u8BEF\u72B6\u6001\n   */\n  showError(container: HTMLElement, message: string): void {\n    container.innerHTML = `\n      <div class=\"koala-error\">\n        <div class=\"koala-error-title\">\u52A0\u8F7D\u5931\u8D25</div>\n        <div class=\"koala-error-description\">${message}</div>\n      </div>\n    `;\n  }\n\n  /**\n   * \u52A0\u8F7D\u804A\u5929\u754C\u9762\n   */\n  loadChatInterface(container: HTMLElement): void {\n    // \u68C0\u67E5\u5FC5\u8981\u914D\u7F6E\n    if (!this.config.organizationName || !this.config.repositoryName) {\n      this.showError(container, \"\u5E94\u7528\u914D\u7F6E\u7F3A\u5931\uFF0C\u65E0\u6CD5\u52A0\u8F7D\u804A\u5929\u754C\u9762\");\n      return;\n    }\n\n    // \u83B7\u53D6API URL\u7528\u4E8E\u6784\u5EFA\u804A\u5929\u754C\u9762URL\n    const baseUrl = getApiUrl(this.config);\n\n    // \u6784\u5EFA\u804A\u5929\u754C\u9762 URL\n    const params = new URLSearchParams({\n      appId: this.config.appId,\n      organizationName: this.config.organizationName,\n      repositoryName: this.config.repositoryName,\n      title: this.config.title || \"AI \u52A9\u624B\",\n      theme: this.config.theme || \"light\",\n      embedded: \"true\",\n    });\n\n    if (this.config.expandIcon) {\n      params.set(\"expandIcon\", this.config.expandIcon);\n    }\n    if (this.config.closeIcon) {\n      params.set(\"closeIcon\", this.config.closeIcon);\n    }\n\n    const chatUrl = `${baseUrl}/chat/embedded?${params.toString()}`;\n\n    // \u521B\u5EFA iframe\n    const iframe = document.createElement(\"iframe\");\n    iframe.src = chatUrl;\n    iframe.className = \"koala-iframe-container\";\n    iframe.frameBorder = \"0\";\n    iframe.setAttribute(\"allowtransparency\", \"true\");\n\n    // \u76F4\u63A5\u63D2\u5165iframe\u5230\u5BB9\u5668\u4E2D\n    container.innerHTML = \"\";\n    container.appendChild(iframe);\n  }\n}\n", "import type { KoalaChatWidgetConfig } from \"./types\";\nimport { clearTimer } from \"./utils\";\n\n/**\n * \u63D0\u793A\u529F\u80FD\u7BA1\u7406\u7C7B\n */\nexport class TooltipManager {\n  private config: KoalaChatWidgetConfig;\n  private tooltipElement: HTMLElement | null = null;\n  private tooltipTimer: NodeJS.Timeout | null = null;\n  private tooltipHideTimer: NodeJS.Timeout | null = null;\n  private lastTooltipHideTime: number = 0;\n  private lastActivity: number = Date.now();\n  private floatingButton: HTMLElement | null = null;\n  private isExpanded: boolean = false;\n\n  constructor(config: KoalaChatWidgetConfig) {\n    this.config = config;\n  }\n\n  /**\n   * \u8BBE\u7F6E\u60AC\u6D6E\u7403\u5F15\u7528\n   */\n  setFloatingButton(button: HTMLElement): void {\n    this.floatingButton = button;\n  }\n\n  /**\n   * \u8BBE\u7F6E\u5C55\u5F00\u72B6\u6001\n   */\n  setExpanded(expanded: boolean): void {\n    this.isExpanded = expanded;\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u6D3B\u52A8\u76D1\u542C\u5668\n   */\n  initActivityListeners(onToggleChat: () => void): void {\n    const events = [\n      \"mousedown\",\n      \"mousemove\",\n      \"keypress\",\n      \"scroll\",\n      \"touchstart\",\n      \"click\",\n    ];\n\n    const updateUserActivity = () => {\n      const now = Date.now();\n\n      // \u5982\u679C\u8DDD\u79BB\u4E0A\u6B21\u6D3B\u52A8\u65F6\u95F4\u592A\u77ED\uFF0C\u907F\u514D\u9891\u7E41\u91CD\u7F6E\n      if (now - this.lastActivity < 1000) {\n        return;\n      }\n\n      this.lastActivity = now;\n      this.hideTooltip();\n\n      // \u91CD\u65B0\u5F00\u59CB\u8BA1\u65F6\n      if (\n        this.config.enableTooltip &&\n        this.floatingButton &&\n        !this.isExpanded\n      ) {\n        this.startTooltipTimer();\n      }\n    };\n\n    events.forEach((event) => {\n      document.addEventListener(event, updateUserActivity, {\n        passive: true,\n        capture: true,\n      });\n    });\n\n    // \u8BBE\u7F6E\u70B9\u51FB\u63D0\u793A\u6253\u5F00\u804A\u5929\u7684\u56DE\u8C03\n    this.onToggleChat = onToggleChat;\n  }\n\n  private onToggleChat: (() => void) | null = null;\n\n  /**\n   * \u5F00\u59CB\u63D0\u793A\u8BA1\u65F6\u5668\n   */\n  startTooltipTimer(): void {\n    this.tooltipTimer = clearTimer(this.tooltipTimer);\n    this.tooltipHideTimer = clearTimer(this.tooltipHideTimer);\n\n    // \u68C0\u67E5\u662F\u5426\u9700\u8981\u7B49\u5F85\u66F4\u957F\u65F6\u95F4\uFF08\u5982\u679C\u63D0\u793A\u4E4B\u524D\u663E\u793A\u8FC7\uFF09\n    const now = Date.now();\n    let delay = this.config.tooltipDelay || 5000;\n\n    if (this.lastTooltipHideTime > 0) {\n      const timeSinceHide = now - this.lastTooltipHideTime;\n      const repeatDelay = this.config.tooltipRepeatDelay || 30000;\n      if (timeSinceHide < repeatDelay) {\n        delay = repeatDelay - timeSinceHide;\n      }\n    }\n\n    this.tooltipTimer = setTimeout(() => {\n      if (!this.isExpanded && this.floatingButton) {\n        this.showTooltip();\n      }\n    }, delay);\n  }\n\n  /**\n   * \u663E\u793A\u63D0\u793A\n   */\n  private showTooltip(): void {\n    if (\n      !this.config.enableTooltip ||\n      !this.config.tooltipText ||\n      this.isExpanded\n    ) {\n      return;\n    }\n\n    if (!this.tooltipElement) {\n      this.createTooltip();\n    }\n\n    if (this.tooltipElement) {\n      this.tooltipElement.textContent = this.config.tooltipText;\n      this.tooltipElement.classList.add(\"visible\");\n\n      // \u8BBE\u7F6E\u81EA\u52A8\u9690\u85CF\u8BA1\u65F6\u5668\n      const duration = this.config.tooltipDuration || 3000;\n      if (duration > 0) {\n        this.tooltipHideTimer = setTimeout(() => {\n          this.hideTooltip();\n        }, duration);\n      }\n    }\n  }\n\n  /**\n   * \u9690\u85CF\u63D0\u793A\n   */\n  hideTooltip(): void {\n    if (this.tooltipElement) {\n      this.tooltipElement.classList.remove(\"visible\");\n    }\n    this.tooltipHideTimer = clearTimer(this.tooltipHideTimer);\n    this.lastTooltipHideTime = Date.now();\n  }\n\n  /**\n   * \u521B\u5EFA\u63D0\u793A\u5143\u7D20\n   */\n  private createTooltip(): void {\n    this.tooltipElement = document.createElement(\"div\");\n    this.tooltipElement.className = \"koala-tooltip\";\n    document.body.appendChild(this.tooltipElement);\n\n    // \u52A8\u6001\u8BA1\u7B97\u4F4D\u7F6E\uFF0C\u786E\u4FDD\u63D0\u793A\u51FA\u73B0\u5728\u60AC\u6D6E\u7403\u4E0A\u65B9\n    const updateTooltipPosition = () => {\n      if (this.floatingButton && this.tooltipElement) {\n        const buttonRect = this.floatingButton.getBoundingClientRect();\n        const tooltipRect = this.tooltipElement.getBoundingClientRect();\n\n        // \u8BA1\u7B97\u63D0\u793A\u4F4D\u7F6E\uFF1A\u60AC\u6D6E\u7403\u4E0A\u65B9\uFF0C\u6C34\u5E73\u5C45\u4E2D\n        const tooltipBottom = window.innerHeight - buttonRect.top + 12; // 12px\u95F4\u8DDD\n        const tooltipRight =\n          window.innerWidth -\n          buttonRect.left -\n          buttonRect.width / 2 -\n          tooltipRect.width / 2;\n\n        this.tooltipElement.style.bottom = tooltipBottom + \"px\";\n        this.tooltipElement.style.right = Math.max(12, tooltipRight) + \"px\";\n      }\n    };\n\n    // \u70B9\u51FB\u63D0\u793A\u65F6\u4E5F\u6253\u5F00\u804A\u5929\n    this.tooltipElement.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      if (this.onToggleChat) {\n        this.onToggleChat();\n      }\n    });\n\n    // \u76D1\u542C\u7A97\u53E3\u5927\u5C0F\u53D8\u5316\n    window.addEventListener(\"resize\", updateTooltipPosition);\n\n    // \u521D\u59CB\u4F4D\u7F6E\u66F4\u65B0\n    requestAnimationFrame(updateTooltipPosition);\n  }\n\n  /**\n   * \u9500\u6BC1\u63D0\u793A\u7BA1\u7406\u5668\n   */\n  destroy(): void {\n    this.tooltipTimer = clearTimer(this.tooltipTimer);\n    this.tooltipHideTimer = clearTimer(this.tooltipHideTimer);\n\n    if (this.tooltipElement) {\n      this.tooltipElement.remove();\n      this.tooltipElement = null;\n    }\n\n    this.lastActivity = Date.now();\n    this.lastTooltipHideTime = 0;\n  }\n}\n", "/**\n * \u521B\u5EFA\u804A\u5929\u7EC4\u4EF6\u7684\u6837\u5F0F\n */\nexport function createStyles(): void {\n  const styles = `.koala-chat-widget{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;direction:ltr}.koala-floating-button{position:fixed;bottom:24px;right:24px;width:56px;height:56px;border-radius:50%;background:#1677ff;border:none;box-shadow:0 4px 20px rgba(0,0,0,0.15);z-index:10000;cursor:pointer;display:flex;align-items:center;justify-content:center;color:white;font-size:24px;transition:transform 0.2s ease}.koala-floating-button:hover{transform:scale(1.05)}.koala-chat-container{position:fixed;bottom:24px;right:24px;width:550px;height:700px;background:white;border-radius:12px;box-shadow:0 8px 32px rgba(0,0,0,0.12);z-index:10001;display:none;flex-direction:column;overflow:hidden;border:1px solid #d9d9d9}.koala-chat-container.visible{display:flex}.koala-chat-container.minimized{height:56px}.koala-chat-container.maximized{width:550px;height:100vh;bottom:0;right:0;top:0}.koala-chat-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #d9d9d9;background:white;min-height:56px}.koala-header-title{display:flex;align-items:center;gap:8px;flex:1;font-size:16px;font-weight:600;margin:0;color:#262626}.koala-header-actions{display:flex;gap:4px}.koala-header-btn{width:24px;height:24px;border:none;background:none;cursor:pointer;border-radius:4px;display:flex;align-items:center;justify-content:center;color:#8c8c8c;transition:background-color 0.2s}.koala-header-btn:hover{background-color:#f5f5f5;color:#595959}.koala-chat-content{flex:1;display:flex;flex-direction:column;overflow:hidden}.koala-loading{display:flex;align-items:center;justify-content:center;padding:20px;color:#8c8c8c}.koala-error{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;color:#ff4d4f;text-align:center}.koala-error-title{font-weight:500;margin-bottom:8px}.koala-error-description{font-size:14px;color:#8c8c8c}.koala-iframe-container{flex:1;border:none;width:100%;height:100%}.koala-tooltip{position:fixed;background:rgba(0,0,0,0.8);color:white;padding:8px 12px;border-radius:8px;font-size:14px;white-space:nowrap;z-index:998;opacity:0;transform:translateY(10px);transition:opacity 0.3s ease,transform 0.3s ease;pointer-events:none}.koala-tooltip.visible{opacity:1;transform:translateY(0)}.koala-tooltip::after{content:'';position:absolute;top:100%;left:50%;transform:translateX(-50%);border:6px solid transparent;border-top-color:rgba(0,0,0,0.8)}@media (max-width:768px){.koala-chat-container{bottom:0;right:0;left:0;width:100%;height:100%;border-radius:0}.koala-chat-container.maximized{width:100%;height:100%}.koala-floating-button{bottom:20px;right:20px}.koala-tooltip{bottom:84px;right:20px;max-width:calc(100vw - 40px);white-space:pre-wrap}}`;\n\n  const styleElement = document.createElement(\"style\");\n  styleElement.textContent = styles;\n  document.head.appendChild(styleElement);\n}\n", "import type { KoalaChatWidgetConfig, KoalaChatWidgetAPI } from \"./types\";\nimport { ValidationService } from \"./validation\";\nimport { UIComponents } from \"./ui\";\nimport { TooltipManager } from \"./tooltip\";\nimport { createStyles } from \"./styles\";\n\n/**\n * KoalaWiki AI Chat Widget \u4E3B\u7C7B\n */\nexport class KoalaChatWidget implements KoalaChatWidgetAPI {\n  version = \"1.0.0\";\n\n  private config: KoalaChatWidgetConfig = {\n    appId: \"\",\n    organizationName: \"default\",\n    repositoryName: \"default\",\n    title: \"AI \u52A9\u624B\",\n    expandIcon: \"\",\n    closeIcon: \"\",\n    apiUrl: \"\",\n    theme: \"light\",\n    enableTooltip: true,\n    tooltipText: \"\u70B9\u51FB\u6211\u8BE2\u95EE\u60A8\u60F3\u77E5\u9053\u7684\uFF01\",\n    tooltipDelay: 5000,\n    tooltipDuration: 3000,\n    tooltipRepeatDelay: 30000,\n  };\n\n  private validationService!: ValidationService;\n  private uiComponents!: UIComponents;\n  private tooltipManager!: TooltipManager;\n\n  private floatingButton: HTMLButtonElement | null = null;\n  private chatContainer: HTMLDivElement | null = null;\n  private isExpanded: boolean = false;\n  private isMinimized: boolean = false;\n  private isMaximized: boolean = false;\n  private isValidated: boolean = false;\n\n  /**\n   * \u521D\u59CB\u5316\u804A\u5929\u7EC4\u4EF6\n   */\n  async init(options: KoalaChatWidgetConfig): Promise<void> {\n    try {\n      // \u5408\u5E76\u914D\u7F6E\n      this.config = { ...this.config, ...options };\n\n      // \u9A8C\u8BC1\u5FC5\u8981\u53C2\u6570\n      if (!this.config.appId) {\n        console.error(\"KoalaChatWidget: appId is required\");\n        return;\n      }\n\n      // \u521D\u59CB\u5316\u670D\u52A1\n      this.validationService = new ValidationService(this.config);\n      this.uiComponents = new UIComponents(this.config);\n      this.tooltipManager = new TooltipManager(this.config);\n\n      // \u9A8C\u8BC1\u57DF\u540D\u5E76\u83B7\u53D6\u5E94\u7528\u914D\u7F6E\n      const success = await this.validationService.validateAndUpdateConfig();\n      if (!success) {\n        return;\n      }\n\n      // \u6807\u8BB0\u4E3A\u5DF2\u9A8C\u8BC1\n      this.isValidated = true;\n\n      // \u7B49\u5F85 DOM \u52A0\u8F7D\u5B8C\u6210\n      if (document.readyState === \"loading\") {\n        document.addEventListener(\"DOMContentLoaded\", () => {\n          setTimeout(() => this.initWidget(), 100);\n        });\n      } else {\n        setTimeout(() => this.initWidget(), 100);\n      }\n    } catch (error) {\n      console.error(\"KoalaChatWidget initialization failed:\", error);\n      if (typeof this.config.onError === \"function\") {\n        this.config.onError(\n          error instanceof Error ? error.message : String(error)\n        );\n      }\n    }\n  }\n\n  /**\n   * \u521D\u59CB\u5316\u7EC4\u4EF6\n   */\n  private initWidget(): void {\n    try {\n      // \u521B\u5EFA\u6837\u5F0F\n      createStyles();\n\n      // \u521B\u5EFA\u60AC\u6D6E\u7403\u6309\u94AE\n      this.floatingButton = this.uiComponents.createFloatingButton(() =>\n        this.toggle()\n      );\n      document.body.appendChild(this.floatingButton);\n\n      // \u8BBE\u7F6E\u63D0\u793A\u7BA1\u7406\u5668\n      this.tooltipManager.setFloatingButton(this.floatingButton);\n      this.tooltipManager.initActivityListeners(() => this.toggle());\n\n      // \u542F\u52A8\u63D0\u793A\u8BA1\u65F6\u5668\n      if (this.config.enableTooltip) {\n        this.tooltipManager.startTooltipTimer();\n      }\n\n      console.log(\"KoalaChatWidget initialized successfully\");\n    } catch (error) {\n      console.error(\"KoalaChatWidget initialization failed:\", error);\n      if (typeof this.config.onError === \"function\") {\n        this.config.onError(\n          error instanceof Error ? error.message : String(error)\n        );\n      }\n    }\n  }\n\n  /**\n   * \u6253\u5F00\u804A\u5929\u7A97\u53E3\n   */\n  async open(): Promise<void> {\n    // \u5982\u679C\u5C1A\u672A\u9A8C\u8BC1\uFF0C\u5148\u8FDB\u884C\u9A8C\u8BC1\n    if (!this.isValidated) {\n      const success = await this.validationService.validateAndUpdateConfig();\n      if (!success) {\n        return;\n      }\n      this.isValidated = true;\n    }\n\n    // \u9690\u85CF\u63D0\u793A\n    this.tooltipManager.hideTooltip();\n\n    if (!this.chatContainer) {\n      this.chatContainer = this.uiComponents.createChatContainer(\n        () => this.minimizeChat(),\n        () => this.toggleMaximize(),\n        () => this.close()\n      );\n      document.body.appendChild(this.chatContainer);\n\n      const contentElement = this.chatContainer.querySelector(\n        \".koala-chat-content\"\n      );\n      if (contentElement) {\n        this.uiComponents.loadChatInterface(contentElement as HTMLElement);\n      }\n    }\n\n    this.chatContainer.classList.add(\"visible\");\n    if (this.floatingButton) {\n      this.floatingButton.style.display = \"none\";\n    }\n    this.isExpanded = true;\n    this.isMinimized = false;\n    this.tooltipManager.setExpanded(true);\n  }\n\n  /**\n   * \u5173\u95ED\u804A\u5929\u7A97\u53E3\n   */\n  close(): void {\n    if (this.chatContainer) {\n      this.chatContainer.classList.remove(\"visible\");\n      this.chatContainer.classList.remove(\"minimized\");\n      this.chatContainer.classList.remove(\"maximized\");\n    }\n    if (this.floatingButton) {\n      this.floatingButton.style.display = \"flex\";\n    }\n    this.isExpanded = false;\n    this.isMinimized = false;\n    this.isMaximized = false;\n    this.tooltipManager.setExpanded(false);\n\n    // \u91CD\u65B0\u5F00\u59CB\u63D0\u793A\u8BA1\u65F6\u5668\n    if (this.config.enableTooltip) {\n      this.tooltipManager.startTooltipTimer();\n    }\n  }\n\n  /**\n   * \u5207\u6362\u804A\u5929\u7A97\u53E3\u72B6\u6001\n   */\n  async toggle(): Promise<void> {\n    if (this.isExpanded) {\n      this.close();\n    } else {\n      await this.open();\n    }\n  }\n\n  /**\n   * \u6700\u5C0F\u5316\u804A\u5929\u7A97\u53E3\n   */\n  private minimizeChat(): void {\n    if (this.chatContainer) {\n      this.chatContainer.classList.add(\"minimized\");\n      this.isMinimized = true;\n    }\n  }\n\n  /**\n   * \u5207\u6362\u6700\u5927\u5316\n   */\n  private toggleMaximize(): void {\n    if (this.chatContainer) {\n      if (this.isMaximized) {\n        this.chatContainer.classList.remove(\"maximized\");\n        this.isMaximized = false;\n      } else {\n        this.chatContainer.classList.add(\"maximized\");\n        this.isMaximized = true;\n      }\n    }\n  }\n\n  /**\n   * \u9500\u6BC1\u7EC4\u4EF6\n   */\n  destroy(): void {\n    // \u79FB\u9664\u5143\u7D20\n    if (this.floatingButton) {\n      this.floatingButton.remove();\n      this.floatingButton = null;\n    }\n    if (this.chatContainer) {\n      this.chatContainer.remove();\n      this.chatContainer = null;\n    }\n\n    // \u9500\u6BC1\u63D0\u793A\u7BA1\u7406\u5668\n    this.tooltipManager?.destroy();\n\n    // \u91CD\u7F6E\u72B6\u6001\n    this.isExpanded = false;\n    this.isMinimized = false;\n    this.isMaximized = false;\n    this.isValidated = false;\n  }\n}\n", "/**\n * KoalaWiki AI Chat Widget\n * \u7B2C\u4E09\u65B9\u7F51\u7AD9\u5F15\u7528\u7684\u804A\u5929\u60AC\u6D6E\u7403\u811A\u672C\n *\n * \u4F7F\u7528\u65B9\u5F0F:\n * <script src=\"https://your-domain.com/koala-chat-widget.js\"></script>\n * <script>\n *   KoalaChatWidget.init({\n *     appId: 'your-app-id',\n *     organizationName: 'your-org',\n *     repositoryName: 'your-repo',\n *     title: '\u6211\u7684 AI \u52A9\u624B',\n *     expandIcon: 'base64-icon-data',\n *     closeIcon: 'base64-icon-data',\n *     apiUrl: 'https://your-api-domain.com'\n *   });\n * </script>\n */\n\nimport { KoalaChatWidget } from \"./widget\";\n\n// \u521B\u5EFA\u5168\u5C40\u5B9E\u4F8B\nconst chatWidget = new KoalaChatWidget();\n\n// \u66B4\u9732\u5168\u5C40 API\nwindow.KoalaChatWidget = {\n  init: chatWidget.init.bind(chatWidget),\n  destroy: chatWidget.destroy.bind(chatWidget),\n  open: chatWidget.open.bind(chatWidget),\n  close: chatWidget.close.bind(chatWidget),\n  toggle: chatWidget.toggle.bind(chatWidget),\n  version: chatWidget.version,\n};\n"],
  "mappings": "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",
  "names": ["getApiUrl", "config", "scriptElement", "scriptSrc", "clearTimer", "timer", "ValidationService", "config", "apiUrl", "getApiUrl", "currentDomain", "response", "data", "error", "validation", "UIComponents", "config", "onClick", "button", "baseUrl", "getApiUrl", "onMinimize", "onMaximize", "onClose", "container", "header", "content", "title", "actions", "minimizeBtn", "maximizeBtn", "closeBtn", "img", "message", "params", "chatUrl", "iframe", "TooltipManager", "config", "button", "expanded", "onToggleChat", "events", "updateUserActivity", "now", "event", "clearTimer", "delay", "timeSinceHide", "repeatDelay", "duration", "updateTooltipPosition", "buttonRect", "tooltipRect", "tooltipBottom", "tooltipRight", "e", "createStyles", "styles", "styleElement", "KoalaChatWidget", "options", "ValidationService", "UIComponents", "TooltipManager", "error", "createStyles", "contentElement", "chatWidget", "KoalaChatWidget"]
}
